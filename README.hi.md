# गाला-गोफर

### गाला-गोफर क्या है

गाला-गोफर एक अवलोकन मंच है जो ईबीपीएफ, जावा एजेंट और अन्य गैर-घुसपैठ अवलोकन योग्य प्रौद्योगिकियों को जोड़ता है। यह जांच-आधारित वास्तुकला के माध्यम से जांच को आसानी से बढ़ा और घटा सकता है। गाला-गोफर गाला प्रोजेक्ट में डेटा संग्रह के लिए जिम्मेदार घटक है। यह गाला प्रोजेक्ट के लिए मेट्रिक्स, इवेंट और पर्फ जैसे डेटा प्रदान करता है, जो गाला प्रोजेक्ट के लिए सिस्टम टोपोलॉजी और स्थान की ड्राइंग को पूरा करने के लिए सुविधाजनक है। दोष का मूल कारण.

### बक्सों का इस्तेमाल करें

#### नेटवर्क मॉनिटरिंग

#### I/O नियंत्रण

#### अनुप्रयोग प्रदर्शन निगरानी

#### अनुप्रयोग प्रदर्शन प्रोफ़ाइलिंग

#### नेटवर्क टोपोलॉजी संग्रह

### इंस्टालेशन गाइड

#### आरपीएम परिनियोजन

-   आरपीएम पैकेज प्राप्त करें

    गाला-गोफर वर्तमान में ओपनयूलर 21.09 (रखरखाव बंद)/ओपनयूलर 22.09 (रखरखाव बंद)/ओपनयूलर 22.03-एलटीएस-एसपी1 में जारी किया गया है, और आरपीएम पैकेज उपरोक्त रिलीज संस्करण के आधिकारिक रेपो स्रोत को कॉन्फ़िगर करके प्राप्त किया जा सकता है; अन्य रिलीज के लिए संस्करण हम आरपीएम पैकेज प्राप्त करने के लिए निम्नलिखित विधियाँ प्रदान करते हैं:

    -   ओबीएस लिंक: वेब पेज से संबंधित आर्किटेक्चर के आरपीएम पैकेज को मैन्युअल रूप से डाउनलोड करें

    ```basic
    openEuler-20.03-LTS : https://117.78.1.88/package/show/home:zpublic:branches:openEuler:20.03:LTS:SP1/gala-gopher-20.03lts
    openEuler-20.03-LTS-SP1 : https://117.78.1.88/package/show/home:zpublic:branches:openEuler:20.03:LTS:SP1/gala-gopher
    EulerOS-V2R9 : https://117.78.1.88/package/show/home:zpublic:branches:openEuler:20.03:LTS:SP1/gala-gopher-v2r9
    ```

    -   दैनिक बिल्ड रेपो स्रोत: यम स्रोत के रूप में कॉन्फ़िगर करने के बाद इंस्टॉल करें

    ```basic
    openEuler 22.03-LTS: http://121.36.84.172/dailybuild/openEuler-22.03-LTS/openEuler-22.03-LTS/EPOL/main/
    ```

-   आरपीएम स्थापित करें

    ```bash
    yum install gala-gopher
    ```

-   दौड़ना

    Systemd के माध्यम से पृष्ठभूमि सेवा प्रारंभ करें:

    ```bash
    systemctl start gala-gopher.service
    ```

#### कंटेनर परिनियोजन

-   कंटेनर छवि प्राप्त करें

    उपयोगकर्ता सीधे चुन सकते हैं[आधिकारिक कंटेनर छवियाँ प्राप्त करें](#docker1)या अपने आप से[एक कंटेनर छवि बनाएँ](#docker2)

    <a id="docker1"></a>

    -   आधिकारिक कंटेनर छवियाँ प्राप्त करें

        hub.oepkgs.net मिरर वेयरहाउस को जोड़ने के लिए निम्नलिखित सामग्री को docker कॉन्फ़िगरेशन फ़ाइल /etc/docker/daemon.json में जोड़ें (यदि फ़ाइल मौजूद नहीं है, तो इसे बनाने की आवश्यकता है)

            {
              "insecure-registries" : [ "hub.oepkgs.net" ]
            }

        पूरा होने के बाद, कॉन्फ़िगरेशन को प्रभावी बनाने के लिए निम्नलिखित कमांड के साथ डॉकर सेवा को पुनरारंभ करें:

            systemctl daemon-reload
            systemctl restart docker


    根据系统架构从对应仓库拉取指定版本的gala-gopher官方容器镜像（以openEuler 20.03 LTS SP1为例）：

    ```
    # x86
    docker pull hub.oepkgs.net/a-ops/gala-gopher-x86_64:20.03-lts-sp1

    # aarch64
    docker pull hub.oepkgs.net/a-ops/gala-gopher-aarch64:20.03-lts-sp1
    ```

    目前支持的镜像版本tag有：euleros-v2r9（仅支持x86），20.03-lts，20.03-lts-sp1，22.03-lts，22.03-lts-sp1

<a id="docker2"></a>

-   एक कंटेनर छवि बनाएँ

    गाला-गोफर का आरपीएम पैकेज प्राप्त करें। विवरण के लिए देखें[आरपीएम परिनियोजन](#RPM方式部署)。

    कंटेनर छवि उत्पन्न करने के लिए उपयोग की जाने वाली डॉकरफ़ाइल को यहां संग्रहीत किया गया है[निर्देशिका बनाएँ](./build), विवरण के लिए जनरेशन विधि देखें[गाला-गोफर कंटेनर छवि कैसे उत्पन्न करें](doc/how_to_build_docker_image.md)。

-   कंटेनर बनाएं और चलाएं

    गाला-गोफर में दो कॉन्फ़िगरेशन फ़ाइलें शामिल हैं: gala-gopher.conf और gala-gopher-app.conf। gala-gopher.conf का उपयोग मुख्य रूप से जांच के डेटा रिपोर्टिंग स्विच, जांच पैरामीटर, जांच सक्षम है या नहीं, आदि को कॉन्फ़िगर करने के लिए किया जाता है; gala-gopher-app.conf अवलोकन श्वेत सूची है, जो प्रक्रिया का नाम जोड़ सकती है उपयोगकर्ता श्वेत सूची में रुचि रखता है। गाला-गोफर इस प्रक्रिया का निरीक्षण करेगा।

    कंटेनर शुरू होने से पहले, उपयोगकर्ता को इन दो कॉन्फ़िगरेशन फ़ाइलों को कॉन्फ़िगर करने की आवश्यकता होती है। कृपया होस्ट पर एक कॉन्फ़िगरेशन फ़ाइल निर्देशिका बनाएं और सेट करें[कॉन्फ़िगरेशन निर्देशिका](./config)अगली दो कॉन्फ़िगरेशन फ़ाइलें इस निर्देशिका में सहेजी गई हैं, उदाहरण इस प्रकार हैं:

    ```shell
    [root@localhost ~]# mkdir gopher_user_conf
    [root@localhost gopher_user_conf]# ll
    total 8.0K
    -rw-r--r--. 1 root root 3.2K Jun 28 09:43 gala-gopher.conf
    -rw-r--r--. 1 root root  108 Jun 27 21:45 gala-gopher-app.conf
    ```

    कृपया अनुसरण करें[कॉन्फ़िगरेशन फ़ाइल परिचय](./doc/conf_introduction.md)कॉन्फ़िगरेशन फ़ाइलें अनुकूलित करें. डॉकर रन कमांड निष्पादित करते समय, आपको होस्ट पर कस्टम कॉन्फ़िगरेशन फ़ाइल निर्देशिका को कंटेनर में /gala-gopher/user_conf निर्देशिका में मैप करने की आवश्यकता है, ताकि कस्टम कॉन्फ़िगरेशन जानकारी को कंटेनर में सिंक्रनाइज़ किया जा सके।

    अंत में, निम्नलिखित उदाहरण कमांड के अनुसार कंटेनर शुरू करें:

    ```shell
    docker run -d --name xxx -p 8888:8888 --privileged -v /etc/machine-id:/etc/machine-id -v /lib/modules:/lib/modules:ro -v /usr/src:/usr/src:ro -v /boot:/boot:ro -v /sys/kernel/debug:/sys/kernel/debug -v /sys/fs/bpf:/sys/fs/bpf -v /root/gopher_user_conf:/gala-gopher/user_conf/ -v /etc/localtime:/etc/localtime:ro -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker/overlay2:/var/lib/docker/overlay2 --pid=host gala-gopher:1.0.1
    ```

    कंटेनर को सफलतापूर्वक शुरू करने के बाद, आप डॉकर पीएस के माध्यम से चल रहे कंटेनर को देख सकते हैं:

    ```shell
    [root@localhost build]# docker ps
    CONTAINER ID   IMAGE               COMMAND                  CREATED              STATUS              PORTS                    NAMES
    eaxxxxxxxx02   gala-gopher:1.0.1   "/bin/sh -c 'cp -f /…"   About a minute ago   Up About a minute   0.0.0.0:8888->8888/tcp   xxx
    ```

-   डेटा पुनः प्राप्त करो

    जैसा कि उपरोक्त चरण में डॉकर रन कमांड में दिखाया गया है, हमने होस्ट के पोर्ट 8888 और कंटेनर के पोर्ट 8888 को मैप किया है, ताकि हम यह सत्यापित करने के लिए पोर्ट 8888 के माध्यम से डेटा प्राप्त कर सकें कि गाला-गोफर सफलतापूर्वक चलता है या नहीं:

    ```shell
    [root@localhost build]# curl http://localhost:8888
    ...
    gala_gopher_udp_que_rcv_drops{tgid="1234",s_addr="192.168.12.34",machine_id="xxxxx",hostname="eaxxxxxxxx02"} 0 1656383357000
    ...
    ```

    यदि संकेतक डेटा आउटपुट है, तो यह साबित होता है कि गाला-गोफर सफलतापूर्वक चलता है।

#### K8S परिनियोजन मोड परिनियोजन

#### 

#### स्वचालित स्क्रिप्ट परिनियोजन

-   परिनियोजन उपकरण प्राप्त करें

    1.  परिनियोजन उपकरण संपीड़ित पैकेज डाउनलोड करें: wget[हत्तपः://जीती.कॉम/वचनगर/ा-ऑप्स-टूल्स/रिपॉजिटरी/आर्काइव/मास्टर.ज़िप](https://gitee.com/Vchanger/a-ops-tools/repository/archive/master.zip)--नो-चेक-सर्टिफिकेट (इंट्रानेट उपयोगकर्ताओं को प्रॉक्सी कॉन्फ़िगर करने की आवश्यकता है)
    2.  संपीड़ित पैकेज को डीकंप्रेस करने के लिए अनज़िप का उपयोग करें और इसका उपयोग करने के लिए संबंधित निर्देशिका दर्ज करें

-   तैनात करने के लिए टूल स्क्रिप्ट निष्पादित करें

    -   आरपीएम मोड (केवल ओपनयूलर 22.03 एलटीएस/ओपनयूलर 22.03 एलटीएस एसपी1 समर्थित है)

            sh deploy.sh gopher -K <kafka服务器地址>

    -   कंटेनर मिररिंग विधि:

            sh deploy.sh gopher -K <kafka服务器地址> --docker --tag <容器镜像tag>

        ध्यान दें: वर्तमान में समर्थित छवि संस्करण टैग हैं: यूलेरोस-v2r9 (केवल x86 का समर्थन करता है), 20.03-lts, 20.03-lts-sp1, 22.03-lts, 22.03-lts-sp1

    उपरोक्त दो चरणों को पूरा करने के बाद, गैला-गोफर चालू स्थिति में प्रवेश कर सकता है। उपयोग की बाधाओं और परिनियोजन उपकरण के सभी विकल्पों के लिए, कृपया देखें[ए-ऑप्स-टूल्स परिनियोजन टूल मैनुअल](https://gitee.com/Vchanger/a-ops-tools#部署gala-gopher)

#### सिस्टम एकीकरण एपीआई और विधि

#### कॉन्फ़िगरेशन विधि और पैरामीटर

[कॉन्फ़िगरेशन विधि और पैरामीटर](https://gitee.com/openeuler/gala-gopher/blob/master/doc/conf_introduction.md#配置文件介绍)

### सॉफ़्टवेयर वास्तुशिल्प

गाला-गोफर आमतौर पर उपयोग की जाने वाली देशी जांच और प्रसिद्ध मिडलवेयर जांच को एकीकृत करता है; गाला-गोफर में अच्छी स्केलेबिलिटी है, आसानी से विभिन्न प्रकार के जांच कार्यक्रमों को एकीकृत कर सकता है, और जांच ढांचे की क्षमताओं को समृद्ध करने के लिए समुदाय की शक्ति का लाभ उठाता है; गाला -सेवरल गोफर में मुख्य घटक:

-   गाला-गोफर ढांचा

    गाला-गोफर का मूल ढाँचा कॉन्फ़िगरेशन फ़ाइल पार्सिंग, देशी जांच/विस्तारित जांच के प्रबंधन, जांच डेटा संग्रह प्रबंधन, जांच डेटा रिपोर्टिंग डॉकिंग, एकीकरण परीक्षण, आदि के लिए जिम्मेदार है;

-   देशी जांच

    मूल जांच मुख्य रूप से लिनक्स-आधारित प्रो फाइल सिस्टम के आधार पर एकत्र किए गए सिस्टम अवलोकन संकेतक हैं;

-   जांच का विस्तार करें

    शेल/जावा/पायथन/सी जैसी विभिन्न भाषाओं में तीसरे पक्ष के जांच कार्यक्रमों का समर्थन करता है, और केवल हल्के डेटा रिपोर्टिंग प्रारूप को पूरा करके गाला-गोफर ढांचे में एकीकृत किया जा सकता है; विभिन्न में अवलोकन मांगों को पूरा करना सुविधाजनक है अनुप्रयोग परिदृश्य; वर्तमान में जाने-माने मिडलवेयर प्रोग्रामों की जांच अवलोकन और सूचकांक रिपोर्टिंग का एहसास करें, जैसे: lvs, nginx, haproxy, dnsmasq, dnsbind, kafka, Rabbitmq, आदि;

-   परिनियोजन कॉन्फ़िगरेशन फ़ाइल

    गाला-गोफर स्टार्टअप कॉन्फ़िगरेशन फ़ाइल विशिष्ट सक्षम जांच को अनुकूलित कर सकती है और डेटा रिपोर्टिंग (काफ्का/प्रोमेथियस, आदि) के लिए डॉकिंग सेवा जानकारी निर्दिष्ट कर सकती है।

### कैसे योगदान करें

#### स्रोत से निर्माण करें

#### आरपीएम पैकेज बनाएं

#### जांच विकास गाइड

[जांच विकास गाइड](https://gitee.com/openeuler/gala-gopher/blob/master/doc/how_to_add_probe.md)

![devops](D:/GiteeCode/fork/gala-gopher/doc/pic/devops.JPG)

#### जांच कैसे जोड़ें

[देशी जांच कैसे जोड़ें](https://gitee.com/openeuler/gala-gopher/blob/master/doc/how_to_add_probe.md#如何新增native探针)

[एक विस्तारित जांच कैसे जोड़ें](https://gitee.com/openeuler/gala-gopher/blob/master/doc/how_to_add_probe.md#如何新增extends探针)

#### किसी जांच को कैसे क्रॉप करें

[जांच क्लिपिंग कैसे प्राप्त करें](https://gitee.com/openeuler/gala-gopher/blob/master/doc/how_to_tail_probe.md)

### मार्ग नक्शा

#### निरीक्षण क्षमता

| विशेषता                                                      | जारी करने का समय | प्रसारित संस्करण                   |
| ------------------------------------------------------------ | ---------------- | ---------------------------------- |
| टीसीपी असामान्य निरीक्षण                                     | 22.12            | ओपनयूलर 22.03 एसपी1                |
| सॉकेट असामान्य निरीक्षण                                      | 22.12            | ओपनयूलर 22.03 एसपी1                |
| सिस्टम कॉल अपवाद निरीक्षण                                    | 22.12            | ओपनयूलर 22.03 एसपी1                |
| प्रक्रिया I/O अपवाद निरीक्षण                                 | 22.12            | ओपनयूलर 22.03 एसपी1                |
| ब्लॉक I/O अपवाद निरीक्षण                                     | 22.12            | ओपनयूलर 22.03 एसपी1                |
| संसाधन रिसाव असामान्य निरीक्षण                               | 22.12            | ओपनयूलर 22.03 एसपी1                |
| हार्डवेयर (डिस्क/नेटवर्क कार्ड/मेमोरी) दोष निरीक्षण          | 23.09            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |
| जेवीएम अपवाद निरीक्षण                                        | 23.09            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |
| होस्ट नेटवर्क स्टैक (वर्चुअलाइजेशन सहित) पैकेट हानि निरीक्षण | 23.09            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |

#### observability

| विशेषता                                                                           | जारी करने का समय | प्रसारित संस्करण                   |
| --------------------------------------------------------------------------------- | ---------------- | ---------------------------------- |
| प्रक्रिया-स्तरीय टीसीपी अवलोकन क्षमता                                             | 22.12            | ओपनयूलर 22.03 एसपी1                |
| प्रक्रिया-स्तरीय सॉकेट अवलोकन क्षमता                                              | 22.12            | ओपनयूलर 22.03 एसपी1                |
| वितरित भंडारण पूर्ण-स्टैक I/O अवलोकन क्षमता                                       | 22.12            | ओपनयूलर 22.03 एसपी1                |
| वर्चुअलाइज्ड स्टोरेज I/O अवलोकन क्षमता                                            | 22.12            | ओपनयूलर 22.03 एसपी1                |
| ब्लॉक I/O अवलोकन क्षमता                                                           | 22.12            | ओपनयूलर 22.03 एसपी1                |
| कंटेनर चलाने की अवलोकन क्षमता                                                     | 22.12            | ओपनयूलर 22.03 एसपी1                |
| रेडिस प्रदर्शन अवलोकन क्षमता                                                      | 22.12            | ओपनयूलर 22.03 एसपी1                |
| पीजी प्रदर्शन अवलोकन क्षमता                                                       | 22.12            | ओपनयूलर 22.03 एसपी1                |
| Nginx सत्र अवलोकन क्षमता                                                          | 22.12            | ओपनयूलर 22.03 एसपी1                |
| हैप्रोक्सी सत्र अवलोकन क्षमता                                                     | 22.12            | ओपनयूलर 22.03 एसपी1                |
| काफ्का सत्र अवलोकन क्षमता                                                         | 22.12            | ओपनयूलर 22.03 एसपी1                |
| जेवीएम प्रदर्शन अवलोकन क्षमता                                                     | 23.06            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |
| L7 प्रोटोकॉल अवलोकन क्षमता (HTTP1.X/MySQL/PGSQL/रेडिस/काफ्का)                     | 23.09            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |
| L7 प्रोटोकॉल अवलोकन क्षमता (HTTP1.X/MySQL/PGSQL/Redis/Kafka/MongoDB/DNS/RocketMQ) | 24.03            | 22.03 SZZ खोलें, 24.03 खोलें       |
| सामान्य अनुप्रयोग प्रदर्शन अवलोकन क्षमता                                          | 24.03            | ओपनयूलर 24.03                      |
| पूर्ण लिंक प्रोटोकॉल ट्रैकिंग क्षमता                                              | 24.09            | ओपनयूलर 24.09                      |

#### प्रदर्शन प्रोफ़ाइलिंग

| विशेषता                                                | जारी करने का समय | प्रसारित संस्करण                   |
| ------------------------------------------------------ | ---------------- | ---------------------------------- |
| सिस्टम प्रदर्शन प्रोफ़ाइलिंग (ऑनसीपीयू, मेम)           | 23.03            | ओपनयूलर 23.09                      |
| सिस्टम प्रदर्शन प्रोफ़ाइलिंग (ऑनसीपीयू, मेम, ऑफसीपीयू) | 23.04            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |
| थ्रेड-स्तरीय प्रदर्शन प्रोफ़ाइलिंग (जावा, सी)          | 23.06            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |

#### संस्करण अनुकूलता

| विशेषता                                           | जारी करने का समय | प्रसारित संस्करण             |
| ------------------------------------------------- | ---------------- | ---------------------------- |
| समर्थन कर्नेल रिलीज़ संस्करण अवधि संगतता          | 23.12            | 22.03 SZZ खोलें, 24.03 खोलें |
| प्रमुख कर्नेल संस्करणों में संगतता का समर्थन करें | 24.09            | ओपनयूलर 24.09                |
|                                                   |                  |                              |

#### प्रोग्रामयोग्य एवं विस्तारयोग्य

| विशेषता                                                            | जारी करने का समय | प्रसारित संस्करण    |
| ------------------------------------------------------------------ | ---------------- | ------------------- |
| तीसरे पक्ष की जांच का गैर-दखल देने वाला एकीकरण                     | 22.12            | ओपनयूलर 22.03 एसपी1 |
| तृतीय-पक्ष ईबीपीएफ स्रोत कोड का गैर-दखल देने वाला एकीकरण           | 24.03            | ओपनयूलर 23.09       |
| बड़ा भाषा ड्राइवर स्वचालित रूप से eBPF अवलोकन जांच उत्पन्न करता है | 24.09            | ओपनयूलर 24.09       |

#### परिनियोजन एवं एकीकरण क्षमताएँ

| विशेषता                                                          | जारी करने का समय | प्रसारित संस्करण                   |
| ---------------------------------------------------------------- | ---------------- | ---------------------------------- |
| प्रोमेथियस निर्यातक डॉकिंग का समर्थन करें                        | 22.12            | ओपनयूलर 22.03 एसपी1                |
| लॉग फ़ाइलों के रूप में डॉकिंग का समर्थन करें                     | 22.12            | ओपनयूलर 22.03 एसपी1                |
| काफ्का क्लाइंट डॉकिंग का समर्थन करें                             | 22.12            | ओपनयूलर 22.03 एसपी1                |
| REST इंटरफ़ेस गतिशील परिवर्तन जांच निगरानी क्षमता का समर्थन करें | 23.06            | ओपनयूलर 22.03 एसपी1, ओपनयूलर 23.09 |
